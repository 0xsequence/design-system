import{j as y}from"./jsx-runtime-D_zvdyIk.js";import{r as o}from"./index-CFahbR6w.js";import{c as E,a as g}from"./color-BQU-ub23.js";const a="dark",i="data-theme",l="@sequence.theme",n=e=>typeof e=="string"&&E.includes(e),S=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),u=e=>e?`${l}.${e}`:l,C=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),d=e=>`--seq-color-${C(e)}`,p=Object.keys(g.dark).map(e=>d(e)),b=e=>{p.forEach(t=>{e.style.removeProperty(t)})},_=(e,t)=>{Object.entries(t).forEach(([c,s])=>{s&&e.style.setProperty(d(c),s)})},v=e=>{const t=localStorage.getItem(u(e));return t&&n(t)?t:null},x=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":matchMedia("(prefers-color-scheme: dark)").matches?"dark":null,f=o.createContext(null),m=e=>{const[t,c]=o.useState(e.theme||a),[s,h]=o.useState(void 0);o.useEffect(()=>{/Mac/.test(window.navigator.userAgent)&&window.document.documentElement.classList.add("is-apple")},[]),o.useEffect(()=>{const r=e.theme||v(e.scope)||e.prefersColorScheme&&x()||a;c(r)},[e.theme,e.scope,e.prefersColorScheme]),o.useEffect(()=>{const r=typeof e.root=="object"?e.root:document.querySelector(e.root||":root");r&&(b(r),n(t)?r.setAttribute(i,t):S(t)&&(r.setAttribute(i,"custom"),_(r,t)),e.root&&r.classList.add("seq-root"),h(e.root?r:document.body))},[t,e.root]);const T=o.useMemo(()=>({theme:t,container:s,setTheme:r=>{n(r)&&localStorage.setItem(u(e.scope),r),c(r)}}),[t,s,e.scope]);return y.jsx(f.Provider,{value:T,children:e.children})},w=()=>{const e=o.useContext(f);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e};try{m.displayName="ThemeProvider",m.__docgenInfo={description:"",displayName:"ThemeProvider",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},root:{defaultValue:null,description:"",name:"root",required:!1,type:{name:"string | HTMLElement"}},scope:{defaultValue:null,description:"",name:"scope",required:!1,type:{name:"string"}},prefersColorScheme:{defaultValue:null,description:"",name:"prefersColorScheme",required:!1,type:{name:"boolean"}}}}}catch{}export{m as T,w as u};
