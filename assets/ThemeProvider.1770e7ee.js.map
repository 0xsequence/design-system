{"version":3,"file":"ThemeProvider.1770e7ee.js","sources":["../../src/components/ThemeProvider/ThemeProvider.tsx"],"sourcesContent":["//import { setElementVars } from '@vanilla-extract/dynamic';\nimport {\n  createContext,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useMemo,\n} from 'react'\n\nconst THEME_ATTR = 'data-theme'\nconst STORAGE_KEY = '@sequence.theme'\n\ninterface ThemeContextValue {\n  theme: 'light' | 'dark'\n}\n\nconst ThemeContext = createContext<ThemeContextValue | null>(null)\n\ninterface ThemeProviderProps {\n  theme?: 'light' | 'dark'\n}\n\nconst persistTheme = (mode: ThemeContextValue['theme']) => {\n  localStorage.setItem(STORAGE_KEY, mode)\n  return mode\n}\n\nconst getPreferredTheme = () => {\n  const preferredTheme = localStorage.getItem(STORAGE_KEY)\n  if (\n    preferredTheme === 'light' ||\n    (preferredTheme !== 'dark' &&\n      matchMedia(`(prefers-color-scheme:light)`).matches)\n  ) {\n    return persistTheme('light')\n  }\n  return persistTheme('dark')\n}\n\nexport const ThemeProvider = (props: PropsWithChildren<ThemeProviderProps>) => {\n  const { theme, children } = props\n\n  const value: ThemeContextValue = useMemo(() => {\n    return {\n      theme: theme ?? getPreferredTheme(),\n    }\n  }, [theme])\n\n  useEffect(() => {\n    const root = document.querySelector(':root')\n\n    if (root) {\n      persistTheme(value.theme)\n      root.setAttribute(THEME_ATTR, value.theme)\n    }\n  }, [value.theme])\n\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>\n}\n\nexport const useTheme = () => useContext(ThemeContext)\n"],"names":["THEME_ATTR","STORAGE_KEY","ThemeContext","createContext","persistTheme","__name","mode","localStorage","getPreferredTheme","preferredTheme","ThemeProvider","props","theme","children","value","useMemo","useEffect","root","_jsx"],"mappings":"oIASA,MAAAA,EAAA,aACAC,EAAA,kBAMAC,EAAAC,EAAAA,QAAAA,cAAA,IAAA,EAMAC,EAAAC,EAAAC,IACEC,aAAAA,QAAAA,EAAAA,CAAAA,EACAD,GAFF,gBAKAE,EAAAH,EAAA,IAAA,CACE,MAAAI,EAAA,aAAA,QAAAR,CAAA,EACA,OAAAQ,IAAA,SAAAA,IAAA,QAAA,WAAA,8BAAA,EAAA,QAKEL,EAAA,OAAA,EAEFA,EAAA,MAAA,CACF,EAVA,qBAYOM,EAAAL,EAAAM,GAAA,CACL,KAAA,CAAM,MAAAC,EAAEA,SAAAA,CAAOC,EAAAA,EAEfC,EAAAC,EAAAA,QAAAA,QAAA,KACE,CAAO,MAAAH,GAAA,KAAAA,EAAAJ,EAAA,CAC4B,GACnC,CAAAI,CAAA,CAAA,EAGFI,OAAAA,EAAAA,QAAAA,UAAAA,IAAAA,CACE,MAAAC,EAAA,SAAA,cAAA,OAAA,EAEAA,IACEb,EAAAA,EAAAA,KAAAA,EACAa,EAAAA,aAAAA,EAAAA,EAAAA,KAAAA,EACF,EAAA,CAAAH,EAAA,KAAA,CAAA,EAGFI,EAAAhB,EAAA,SAAA,CAA6B,MAAAY,EAAC,SAAAD,CAAa,CAAA,CAC7C,EAnBO"}