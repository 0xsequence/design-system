import{j as S}from"./jsx-runtime-CexXSJP5.js";import{r as c}from"./index-BP8_t0zE.js";import{c as m}from"./vars.css-Bxe7uErn.js";import{c as A}from"./color-CJfOpmzb.js";function w(e){var t=e.match(/^var\((.*)\)$/);return t?t[1]:e}function b(e,t){var o=e;for(var s of t){if(!(s in o))throw new Error("Path ".concat(t.join(" -> ")," does not exist in object"));o=o[s]}return o}function y(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s={};for(var r in e){var n=e[r],i=[...o,r];typeof n=="string"||typeof n=="number"||n==null?s[r]=t(n,i):typeof n=="object"&&!Array.isArray(n)?s[r]=y(n,t,i):console.warn('Skipping invalid key "'.concat(i.join("."),'". Should be a string, number, null or object. Received: "').concat(Array.isArray(n)?"Array":typeof n,'"'))}return s}function u(e,t,o){e.style.setProperty(w(t),o)}function f(e,t,o){if(typeof o=="object"){var s=t;y(o,(l,p)=>{l!=null&&u(e,b(s,p),String(l))})}else{var r=t;for(var n in r){var i=r[n];i!=null&&u(e,n,r[n])}}}const a=["dark","light"],d="dark",j="data-theme",h="@sequence.theme",x=e=>a.includes(e),v=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),T=e=>e?`${h}.${e}`:h,C=e=>{const t=localStorage.getItem(T(e));return t&&a.includes(t)?t:null},P=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":matchMedia("(prefers-color-scheme: dark)").matches?"dark":null,E=c.createContext(null),g=e=>{const[t,o]=c.useState(e.theme||d);c.useEffect(()=>{/Mac/.test(window.navigator.userAgent)&&window.document.documentElement.classList.add("is-apple")},[]),c.useEffect(()=>{const r=e.theme||C(e.scope)||e.prefersColorScheme&&P()||d;o(r)},[e.theme,e.scope,e.prefersColorScheme]),c.useEffect(()=>{const r=document.querySelector(e.root||":root");r&&(x(t)?(r.setAttribute(j,t),f(r,m,{colors:A[t]})):v(t)&&f(r,m,{colors:t}),e.root&&r.classList.add("seq-root"))},[t,e.root]);const s=c.useMemo(()=>({theme:t,root:e.root,setTheme:r=>{a.includes(r)&&(localStorage.setItem(T(e.scope),r),o(r))}}),[t,e.root,e.scope]);return S.jsx(E.Provider,{value:s,children:e.children})},R=()=>{const e=c.useContext(E);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e};try{g.displayName="ThemeProvider",g.__docgenInfo={description:"",displayName:"ThemeProvider",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:'"dark" | "light" | Partial<ColorTokens>'}},root:{defaultValue:null,description:"",name:"root",required:!1,type:{name:"string"}},scope:{defaultValue:null,description:"",name:"scope",required:!1,type:{name:"string"}},prefersColorScheme:{defaultValue:null,description:"",name:"prefersColorScheme",required:!1,type:{name:"boolean"}}}}}catch{}export{g as T,R as u};
