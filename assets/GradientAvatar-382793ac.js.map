{"version":3,"file":"GradientAvatar-382793ac.js","sources":["../../src/components/GradientAvatar/GradientAvatar.tsx"],"sourcesContent":["import { Fragment } from 'react'\n\nimport { Box, BoxProps } from '~/components/Box'\n\nimport * as styles from './styles.css'\n\ntype GradientAvatarProps = {\n  address: string\n  initials?: string\n  complexity?: number\n} & styles.AvatarVariants &\n  BoxProps\n\nconst cyrb53 = (str: string, seed: number = 0): number => {\n  let h1 = 0xdeadbeef ^ seed,\n    h2 = 0x41c6ce57 ^ seed\n\n  for (let i = 0, ch; i < str.length; i++) {\n    ch = str.charCodeAt(i)\n    h1 = Math.imul(h1 ^ ch, 2654435761)\n    h2 = Math.imul(h2 ^ ch, 1597334677)\n  }\n\n  h1 =\n    Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^\n    Math.imul(h2 ^ (h2 >>> 13), 3266489909)\n  h2 =\n    Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^\n    Math.imul(h1 ^ (h1 >>> 13), 3266489909)\n\n  return 4294967296 * (2097151 & h2) + (h1 >>> 0)\n}\n\nconst generateGradient = (a: number, b: number, c: number) => {\n  const hueA = a % 360\n  const hueB = (a + 120) % 360\n  const hueC = c % 360\n\n  return {\n    id: cyrb53(`${hueA}-${hueB}-${hueC}`),\n    a: `hsl(${hueA}deg 100% 40%)`,\n    b: `hsl(${hueB}deg 100% 50%)`,\n    c: `hsl(${hueC}deg 100% 50%)`,\n  }\n}\n\ninterface HashState {\n  a: number\n  b: number\n  c: number\n  x: number\n  y: number\n  r: number\n}\n\nexport const GradientAvatar = (props: GradientAvatarProps) => {\n  const { address, size = 'md', complexity = 1, ...rest } = props\n\n  const hashes: HashState[] = []\n  for (let i = 0; i < complexity; i++) {\n    const offset = i * 6\n\n    hashes.push({\n      a: cyrb53(address + 'a', offset),\n      b: cyrb53(address + 'b', offset + 1),\n      c: cyrb53(address + 'c', offset + 2),\n      x: cyrb53(address + 'd', offset + 3),\n      y: cyrb53(address + 'e', offset + 4),\n      r: cyrb53(address + 'f', offset + 5),\n    })\n  }\n\n  const gradients = hashes.map((hash, idx) => ({\n    ...generateGradient(hash.a, hash.b, hash.c),\n    x: hash.x % 1000,\n    y: hash.y % 1000,\n    r: 100 + (hash.r % (1500 / (idx + 1))),\n  }))\n\n  return (\n    <Box\n      as=\"svg\"\n      className={styles.avatar({ size })}\n      viewBox={`0 0 1000 1000`}\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...rest}\n    >\n      <defs>\n        <clipPath id=\"circle-clip\">\n          <circle cx=\"500\" cy=\"500\" r=\"500\" />\n        </clipPath>\n\n        <filter\n          id=\"blur\"\n          x=\"-10%\"\n          y=\"-10%\"\n          width=\"120%\"\n          height=\"120%\"\n          filterUnits=\"userSpaceOnUse\"\n          colorInterpolationFilters=\"sRGB\"\n        >\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\"></feFlood>\n          <feBlend\n            mode=\"normal\"\n            in=\"SourceGraphic\"\n            in2=\"BackgroundImageFix\"\n            result=\"shape\"\n          ></feBlend>\n          <feGaussianBlur\n            stdDeviation=\"100\"\n            result=\"effect1_foregroundBlur\"\n          ></feGaussianBlur>\n        </filter>\n\n        {gradients.map(gradient => (\n          <Fragment key={gradient.id}>\n            <radialGradient id={`gradient-primary-${gradient.id}`}>\n              <stop offset=\"0\" stopColor={gradient.a} />\n              <stop offset=\"1\" stopColor={gradient.b} />\n            </radialGradient>\n\n            <radialGradient id={`gradient-secondary-${gradient.id}`}>\n              <stop offset=\"0\" stopColor={gradient.c} />\n              <stop offset=\"1\" stopColor={gradient.b} />\n            </radialGradient>\n          </Fragment>\n        ))}\n\n        <linearGradient\n          id={`gradient-background-${gradients[0].id}`}\n          x1=\"0\"\n          y1=\"0\"\n          x2=\"1\"\n          y2=\"1\"\n        >\n          <stop offset=\"0\" stopColor={gradients[0].c} />\n          <stop offset=\"1\" stopColor={gradients[0].a} />\n        </linearGradient>\n      </defs>\n\n      <g clipPath=\"url(#circle-clip)\">\n        <rect\n          width=\"100%\"\n          height=\"100%\"\n          fill={`url(#gradient-background-${gradients[0].id})`}\n        />\n\n        <g filter=\"url(#blur)\">\n          {gradients.map(gradient => (\n            <Fragment key={gradient.id}>\n              <circle\n                fill={`url(#gradient-primary-${gradient.id})`}\n                cx={gradient.x}\n                cy={gradient.y}\n                r={gradient.r}\n              />\n              <circle\n                fill={`url(#gradient-secondary-${gradient.id})`}\n                cx={gradient.y}\n                cy={gradient.x}\n                r={gradient.r / 2}\n              />\n            </Fragment>\n          ))}\n        </g>\n\n        {/* {initials && (\n          <text\n            x=\"50%\"\n            y=\"50%\"\n            alignmentBaseline=\"central\"\n            dominantBaseline=\"central\"\n            textAnchor=\"middle\"\n            fill=\"#fff\"\n            fontFamily=\"sans-serif\"\n            fontSize={(size * 0.9) / text.length}\n          >\n            {initials}\n          </text>\n        )} */}\n      </g>\n    </Box>\n  )\n}\n"],"names":["cyrb53","__name","str","seed","h1","h2","i","ch","generateGradient","a","b","c","hueA","hueB","hueC","GradientAvatar","props","address","complexity","rest","hashes","offset","gradients","hash","idx","_jsxs","Box","styles.avatar","size","_jsx","gradient","Fragment","id","x","y","r"],"mappings":"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"}