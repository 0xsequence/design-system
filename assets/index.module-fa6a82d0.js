import{_ as C}from"./extends-98964cd2.js";import{r as t}from"./index-d8ade8ea.js";import{$ as k,a as K,b as B,g as Y,c as D,d as $}from"./index.module-d15610cf.js";import{a as V,$ as z}from"./index.module-8c7796ea.js";import{$ as H}from"./index.module-a9b21657.js";const w="rovingFocusGroup.onEntryFocus",j={bubbles:!1,cancelable:!0},_="RovingFocusGroup",[x,P,q]=V(_),[J,ie]=k(_,[q]),[Q,W]=J(_),X=t.forwardRef((e,o)=>t.createElement(x.Provider,{scope:e.__scopeRovingFocusGroup},t.createElement(x.Slot,{scope:e.__scopeRovingFocusGroup},t.createElement(Z,C({},e,{ref:o}))))),Z=t.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:c,orientation:r,loop:m=!1,dir:v,currentTabStopId:i,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:I,onEntryFocus:F,...p}=e,l=t.useRef(null),s=K(o,l),u=z(v),[g=null,a]=B({prop:i,defaultProp:f,onChange:I}),[d,S]=t.useState(!1),E=Y(F),y=P(c),R=t.useRef(!1),[O,A]=t.useState(0);return t.useEffect(()=>{const n=l.current;if(n)return n.addEventListener(w,E),()=>n.removeEventListener(w,E)},[E]),t.createElement(Q,{scope:c,orientation:r,dir:u,loop:m,currentTabStopId:g,onItemFocus:t.useCallback(n=>a(n),[a]),onItemShiftTab:t.useCallback(()=>S(!0),[]),onFocusableItemAdd:t.useCallback(()=>A(n=>n+1),[]),onFocusableItemRemove:t.useCallback(()=>A(n=>n-1),[])},t.createElement(D.div,C({tabIndex:d||O===0?-1:0,"data-orientation":r},p,{ref:s,style:{outline:"none",...e.style},onMouseDown:$(e.onMouseDown,()=>{R.current=!0}),onFocus:$(e.onFocus,n=>{const N=!R.current;if(n.target===n.currentTarget&&N&&!d){const h=new CustomEvent(w,j);if(n.currentTarget.dispatchEvent(h),!h.defaultPrevented){const T=y().filter(b=>b.focusable),M=T.find(b=>b.active),L=T.find(b=>b.id===g),U=[M,L,...T].filter(Boolean).map(b=>b.ref.current);G(U)}}R.current=!1}),onBlur:$(e.onBlur,()=>S(!1))})))}),ee="RovingFocusGroupItem",te=t.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:c,focusable:r=!0,active:m=!1,...v}=e,i=H(),f=W(ee,c),I=f.currentTabStopId===i,F=P(c),{onFocusableItemAdd:p,onFocusableItemRemove:l}=f;return t.useEffect(()=>{if(r)return p(),()=>l()},[r,p,l]),t.createElement(x.ItemSlot,{scope:c,id:i,focusable:r,active:m},t.createElement(D.span,C({tabIndex:I?0:-1,"data-orientation":f.orientation},v,{ref:o,onMouseDown:$(e.onMouseDown,s=>{r?f.onItemFocus(i):s.preventDefault()}),onFocus:$(e.onFocus,()=>f.onItemFocus(i)),onKeyDown:$(e.onKeyDown,s=>{if(s.key==="Tab"&&s.shiftKey){f.onItemShiftTab();return}if(s.target!==s.currentTarget)return;const u=ne(s,f.orientation,f.dir);if(u!==void 0){s.preventDefault();let a=F().filter(d=>d.focusable).map(d=>d.ref.current);if(u==="last")a.reverse();else if(u==="prev"||u==="next"){u==="prev"&&a.reverse();const d=a.indexOf(s.currentTarget);a=f.loop?ce(a,d+1):a.slice(d+1)}setTimeout(()=>G(a))}})})))}),oe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function re(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ne(e,o,c){const r=re(e.key,c);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return oe[r]}function G(e){const o=document.activeElement;for(const c of e)if(c===o||(c.focus(),document.activeElement!==o))return}function ce(e,o){return e.map((c,r)=>e[(o+r)%e.length])}const $e=X,le=te;export{ie as $,$e as a,le as b};
//# sourceMappingURL=index.module-fa6a82d0.js.map
