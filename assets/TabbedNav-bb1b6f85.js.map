{"version":3,"file":"TabbedNav-bb1b6f85.js","sources":["../../src/components/TabbedNav/TabbedNav.tsx"],"sourcesContent":["import { clsx } from 'clsx'\nimport { ComponentType, MouseEvent, ReactNode, useState } from 'react'\n\nimport { Box, PolymorphicProps } from '~/components/Box'\nimport { Button } from '~/components/Button'\nimport { IconProps } from '~/icons/types'\n\nimport * as styles from './styles.css'\n\nexport type TabOption = {\n  label: ReactNode\n  leftIcon?: ComponentType<IconProps>\n  value: string\n  disabled?: boolean\n  onLoad?: () => boolean | Promise<boolean>\n}\n\ntype TabbedNavProps = {\n  defaultValue?: string\n  size?: 'xs' | 'sm'\n  tabs: TabOption[]\n  onTabChange?: (value: string) => void\n}\n\nexport const TabbedNav = (props: PolymorphicProps<TabbedNavProps, 'div'>) => {\n  const {\n    className,\n    defaultValue,\n    size = 'sm',\n    tabs,\n    onTabChange,\n    ...rest\n  } = props\n\n  const [isLoading, setIsLoading] = useState<boolean>(false)\n  const [value, setValue] = useState<string>(defaultValue ?? tabs[0].value)\n\n  const handleTabClick = async (\n    event: MouseEvent<HTMLButtonElement>,\n    option: TabOption,\n    tabIndex: number\n  ) => {\n    event.preventDefault()\n\n    const prevValue = value\n\n    if (value === option.value) {\n      return\n    }\n\n    setValue(tabs[tabIndex].value)\n\n    setIsLoading(true)\n\n    const loadSucceeded = option.onLoad ? await option.onLoad?.() : true\n\n    setIsLoading(false)\n\n    if (loadSucceeded) {\n      onTabChange?.(option.value)\n    } else {\n      setValue(prevValue)\n    }\n  }\n\n  return (\n    <Box as=\"nav\" {...rest}>\n      <Box as=\"ul\" gap=\"2\">\n        {tabs.map((option, tabIndex) => (\n          <Box as=\"li\" key={tabIndex}>\n            <Button\n              className={clsx(\n                className,\n                styles.tab({ active: option.value === value })\n              )}\n              variant=\"base\"\n              disabled={isLoading || option.disabled}\n              label={option.label}\n              leftIcon={option.leftIcon ?? undefined}\n              onClick={(ev: MouseEvent<HTMLButtonElement>) =>\n                handleTabClick(ev, option, tabIndex)\n              }\n              paddingLeft={option.leftIcon ? '1' : '2'}\n              size={size}\n              borderRadius=\"circle\"\n            />\n          </Box>\n        ))}\n      </Box>\n    </Box>\n  )\n}\n"],"names":["TabbedNav","props","className","defaultValue","size","tabs","onTabChange","rest","isLoading","setIsLoading","useState","value","setValue","handleTabClick","event","option","tabIndex","prevValue","loadSucceeded","_a","jsx","Box","Button","clsx","styles.tab","ev"],"mappings":"gdAwBO,MAAAA,EAAAC,GAAA,CACL,KAAA,CAAM,UAAAC,EACJ,aAAAC,EACA,KAAAC,EAAA,KACO,KAAAC,EACP,YAAAC,EACA,GAAAC,CACG,EAAAN,EAGL,CAAAO,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EACA,CAAAC,EAAAC,CAAA,EAAAF,EAAA,SAAAP,GAAAE,EAAA,CAAA,EAAA,KAAA,EAEAQ,EAAA,MAAAC,EAAAC,EAAAC,IAAA,OAKEF,EAAA,eAAA,EAEA,MAAAG,EAAAN,EAEA,GAAAA,IAAAI,EAAA,MACE,OAGFH,EAAAP,EAAAW,CAAA,EAAA,KAAA,EAEAP,EAAA,EAAA,EAEA,MAAAS,EAAAH,EAAA,OAAA,OAAAI,EAAAJ,EAAA,SAAA,YAAAI,EAAA,KAAAJ,IAAA,GAEAN,EAAA,EAAA,EAEAS,EACEZ,GAAA,MAAAA,EAAAS,EAAA,OAEAH,EAAAK,CAAA,CACF,EAGF,OAAAG,EAAAC,EAAA,CAAA,GAAA,MAAA,GAAAd,EAAA,SAAAa,EAAAC,EAAA,CAAA,GAAA,KAAA,IAAA,IAAA,SAAAhB,EAAA,IAAA,CAAAU,EAAAC,IAAAI,EAAAC,EAAA,CAAA,GAAA,KAAA,SAAAD,EAKUE,EAAC,CAAA,UAAAC,EACYrB,EACTsB,EAAA,CAAA,OAAAT,EAAA,QAAAJ,CAAA,CAAA,CAC6C,EAC/C,QAAA,OACQ,SAAAH,GAAAO,EAAA,SACsB,MAAAA,EAAA,MAChB,SAAAA,EAAA,UAAA,OACe,QAAAU,GAAAZ,EAAAY,EAAAV,EAAAC,CAAA,EAEQ,YAAAD,EAAA,SAAA,IAAA,IAEA,KAAAX,EACrC,aAAA,QACa,CAAA,CAAA,EAAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAO3B"}