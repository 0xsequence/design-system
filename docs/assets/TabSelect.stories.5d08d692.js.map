{"version":3,"file":"TabSelect.stories.5d08d692.js","sources":["../../src/components/TabSelect/TabSelect.tsx"],"sourcesContent":["import { ComponentType, MouseEvent, useState } from 'react'\n\nimport { Box, PolymorphicProps } from '~/components/Box'\nimport { Button } from '~/components/Button'\nimport { IconProps } from '~/icons/types'\n\nexport type TabOption = {\n  label: string\n  LeftIcon?: ComponentType<IconProps>\n  value: string\n  onClick?: () => boolean | Promise<boolean>\n}\n\ntype TabSelectProps = {\n  activeTab?: string\n  tabs: TabOption[]\n}\n\nexport const TabSelect = ({\n  activeTab,\n  tabs,\n  ...rest\n}: PolymorphicProps<TabSelectProps, 'div'>) => {\n  const [isLoading, setIsLoading] = useState<boolean>(false)\n  const [activeTabValue, setActiveTabValue] = useState<string>(\n    activeTab ?? tabs[0].value\n  )\n\n  const handleTabClick = async (\n    event: MouseEvent<HTMLButtonElement>,\n    option: TabOption,\n    tabIndex: number\n  ) => {\n    event.preventDefault()\n\n    if (activeTabValue === option.value) {\n      return\n    }\n\n    const prevTab = activeTabValue\n    setActiveTabValue(tabs[tabIndex].value)\n    setIsLoading(true)\n    const loadSucceeded = await option.onClick?.()\n    setIsLoading(false)\n\n    if (!loadSucceeded) {\n      setActiveTabValue(prevTab)\n    }\n  }\n\n  return (\n    <Box as=\"nav\" {...rest}>\n      <Box as=\"ul\" display=\"flex\" gap=\"2\">\n        {tabs.map((option, tabIndex) => (\n          <Box as=\"li\" display=\"block\" key={tabIndex}>\n            <Button\n              disabled={isLoading}\n              label={option.label}\n              LeftIcon={option.LeftIcon ?? undefined}\n              onClick={(e: MouseEvent<HTMLButtonElement>) =>\n                handleTabClick(e, option, tabIndex)\n              }\n              paddingLeft={option.LeftIcon ? '1' : '2'}\n              size=\"tab\"\n              variant={option.value === activeTabValue ? 'active' : 'inactive'}\n            />\n          </Box>\n        ))}\n      </Box>\n    </Box>\n  )\n}\n"],"names":["TabSelect","__name","activeTab","tabs","isLoading","setIsLoading","useState","activeTabValue","setActiveTabValue","handleTabClick","event","option","tabIndex","prevTab","loadSucceeded","_a","_jsx","Box","rest","Button","label","undefined"],"mappings":"ihBAkBO,MAAAA,EAAAC,EAAA,CAAA,CAAmB,UAAAC,EACxBA,KAAAA,KACAC,CAEuC,IAAA,CACvC,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,QAAA,SAAA,EAAA,EACA,CAAAC,EAAAC,CAAA,EAAAF,EAAA,QAAA,SAAAJ,GAAA,KAAAA,EAAAC,EAAA,GAAA,KAAA,EAIAM,EAAAR,EAAA,MAAAS,EAAAC,EAAAC,IAAA,OAOE,GAFAF,EAAAA,eAAAA,EAEAH,IAAAI,EAAA,MACE,OAGF,MAAAE,EAAAN,EACAC,EAAAA,EAAAA,GAAAA,KAAAA,EACAH,EAAAA,EAAAA,EACA,MAAAS,EAAA,OAAAC,EAAAJ,EAAA,UAAA,YAAAI,EAAA,KAAAJ,IACAN,EAAAA,EAAAA,EAEAS,GACEN,EAAAA,CAAAA,CACF,EAnBF,kBAsBA,OAAAQ,EAAAC,EAAA,CACM,GAAA,MAAI,GAAAC,EAAUA,SAAAA,EAAAA,EAAAA,CACZ,GAAA,KAAI,QAAA,OAAa,IAAA,IAAW,SAAAf,EAAA,IAAA,CAAAQ,EAAAC,IAAA,OAAAI,OAAAA,EAAAC,EAAA,CAExB,GAAA,KAAI,QAAA,QAAa,SAAAD,EAAAG,EAAA,CACZ,SAAAf,EACKA,MAAAA,EAAAA,MACIgB,UAAAA,EAAAA,EAAAA,WAAAA,KAAAA,EAAAA,OACeC,QAAAA,GAAAA,EAAAA,EAAAA,EAAAA,CAAAA,EAEO,YAAAV,EAAA,SAAA,IAAA,IAEC,KAAA,MAChC,QAAAA,EAAA,QAAAJ,EAAA,SAAA,UACiD,CAAA,CAAW,EAAAK,CAAA,EAAA,CAGtE,CAAA,CAAC,CAAA,CAIV,EArDO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}